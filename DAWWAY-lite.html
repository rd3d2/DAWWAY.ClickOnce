<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DAWWAY Lite - Installation Configuration</title>
  <meta name="description" content="Choose your DAW and control surface to open the correct setup guide and recommended MIDI routing, then continue to download DAWWAY Lite." />
  <link rel="icon" href="favicon.ico" sizes="any">

  <style>
    :root{
      --bg: #07070a;
      --bg2:#0d0e13;
      --muted:#a7afc2;
      --text:#eef1ff;
      --gold:#d8b15b;
      --gold2:#f6dd9b;
      --line: rgba(255,255,255,.12);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 26px;
      --max: 980px;

      --ok: #59ff9f;
      --warn: #ffdc50;
      --danger: #ff5a5a;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 520px at 50% -10%, rgba(216,177,91,.20), transparent 60%),
        radial-gradient(900px 420px at 10% 10%, rgba(68, 188, 255, .08), transparent 60%),
        radial-gradient(900px 420px at 90% 20%, rgba(112, 255, 186, .06), transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      line-height:1.45;
    }
    a{ color:inherit; }

    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(140%) blur(10px);
      background:rgba(7,7,10,.65);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{
      max-width:var(--max);
      margin:0 auto;
      padding:12px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      font-weight:800;
      letter-spacing:.3px;
    }
    .badge{
      font-size:12px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(216,177,91,.40);
      background:rgba(216,177,91,.08);
      color:var(--gold2);
    }
    .nav-links{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      font-size:14px;
      color:var(--muted);
    }
    .nav-links a{
      text-decoration:none;
      padding:8px 10px;
      border-radius:12px;
      border:1px solid transparent;
    }
    .nav-links a:hover{
      background:rgba(255,255,255,.06);
      color:var(--text);
      border-color: rgba(255,255,255,.06);
    }

    .wrap{ max-width:var(--max); margin:0 auto; padding:22px 20px 34px; }
    .kicker{ color:var(--gold2); font-weight:800; letter-spacing:.12em; text-transform:uppercase; font-size:12px; }
    h1{ margin:.35rem 0 .6rem; font-size: clamp(30px, 4vw, 44px); line-height:1.05; letter-spacing:-.02em; }
    .sub{ font-size: clamp(15px, 1.6vw, 18px); color:var(--muted); margin:0 0 18px; }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--line);
      border-radius:var(--radius2);
      box-shadow:var(--shadow);
    }

    .panel{ padding:18px; }
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    @media (min-width: 860px){
      .grid{ grid-template-columns: 1fr 1fr; }
      .full{ grid-column: 1 / -1; }
    }

    .steps{
      padding:16px 18px;
      border-radius:var(--radius);
      border:1px solid rgba(216,177,91,.25);
      background: rgba(216,177,91,.07);
    }
    .steps strong{ display:block; margin-bottom:8px; }
    .steps ol{ margin: 0 0 0 18px; padding:0; color:var(--muted); }
    .steps li{ margin: 6px 0; }
    .hint{ margin:10px 0 0; color:var(--muted); font-size:13px; }

    label{ display:block; margin: 0 0 7px; font-weight:700; }
    .select{
      width:100%;
      max-width: 440px;
      padding: 12px 14px;
      font-size: 15px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      color: var(--text);
      outline:none;
    }
    .select:focus{ border-color: rgba(216,177,91,.55); box-shadow: 0 0 0 4px rgba(216,177,91,.14); }
    option{ color:#111; }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top: 14px; }
    .cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      text-decoration:none;
      padding:12px 16px;
      border-radius:14px;
      border:1px solid rgba(216,177,91,.55);
      background:linear-gradient(180deg, rgba(216,177,91,.22), rgba(216,177,91,.10));
      box-shadow: 0 10px 30px rgba(216,177,91,.12);
      font-weight:800;
      cursor:pointer;
      user-select:none;
    }
    .cta:hover{ transform: translateY(-1px); transition:.15s ease; }
    .cta.secondary{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      box-shadow:none;
      font-weight:700;
      color:var(--text);
    }
    .cta.disabled,
    .cta:disabled{
      opacity:.55;
      pointer-events:none;
      cursor:not-allowed;
      transform:none;
    }

    .note{
      margin-top: 10px;
      color:var(--muted);
      font-size: 13px;
    }
    .ok{
      display:none;
      margin-top: 10px;
      font-weight:800;
      color: var(--ok);
    }
    .divider{ height:1px; background:var(--line); margin: 14px 0 0; }

    .mini-links{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; color:var(--muted); font-size: 14px; }
    .mini-links a{ text-decoration:none; padding:8px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.10); background: rgba(255,255,255,.04); }
    .mini-links a:hover{ background: rgba(255,255,255,.08); color:var(--text); }

    .cta.small{ padding:10px 14px; font-size:14px; border-radius:12px; }
    .support-row{ display:none; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px; }
    .extender-note{
      display:none;
      margin-top:10px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(255,220,80,.30);
      background: rgba(255,220,80,.08);
      color:var(--muted);
      font-size:14px;
    }
    .extender-note strong{ color:var(--text); }
  </style>
</head>

<body>
  <header class="nav">
    <div class="nav-inner">
      <a class="brand" href="index.html" aria-label="DAWWAY Lite home">
        DAWWAY <span class="badge">Lite</span>
      </a>
      <nav class="nav-links" aria-label="Primary">
        <a href="DAWWAY-lite.html" aria-current="page">Installation configuration</a>
        <a href="index.html">Download</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="kicker">Installation</div>
    <h1>Installation Configuration</h1>
    <p class="sub">Pick your DAW and control surface to open the correct setup guide and recommended MIDI routing.</p>

    <div class="card">
      <div class="panel">
        <div class="steps">
          <strong>Installation steps</strong>
          <ol>
            <li>Complete the installation configuration (30 seconds)</li>
            <li>Open the correct setup guide for your DAW</li>
            <li>Install DAWWAY Lite</li>
          </ol>
          <p class="hint">This reduces common MIDI-routing issues and gets you running faster.</p>
        </div>

        <div class="divider"></div>

        <div class="grid" style="margin-top:14px;">
          <div>
            <label for="dawSelect">Which DAW are you using?</label>
            <select id="dawSelect" class="select">
              <option value="">-- Select your DAW --</option>
              <option value="Ableton" data-forum="f5-getting-dawway-working-with-ableton">Ableton</option>
              <option value="Ardour" data-forum="f25-getting-dawway-working-with-ardour">Ardour</option>
              <option value="Bitwig" data-forum="f9-getting-dawway-working-with-bitwig">Bitwig</option>
              <option value="Cubase / Nuendo" data-forum="f13-getting-dawway-working-with-cubase-and-nuendo">Cubase / Nuendo</option>
              <option value="Logic" data-forum="f30-getting-dawway-working-with-logic">Logic</option>
              <option value="Luna" data-forum="f27-getting-dawway-working-with-luna">Luna</option>
              <option value="FL Studio" data-forum="f17-getting-dawway-working-with-fl-studio">FL Studio</option>
              <option value="Mixcraft" data-forum="">Mixcraft</option>
              <option value="Reaper" data-forum="f28-getting-dawway-working-with-reaper">Reaper</option>
              <option value="Reason" data-forum="f29-getting-dawway-working-with-reason">Reason</option>
              <option value="Studio One" data-forum="f21-getting-dawway-working-with-studio-one">Studio One</option>
              <option value="Other" data-forum="">Other</option>
            </select>
          </div>

          <div>
            <label for="surfaceSelect">Which Control Surface are you using?</label>
            <select id="surfaceSelect" class="select">
              <option value="">-- Select your Control Surface --</option>
              <option value="AVID - Artist Mix">AVID - Artist Mix</option>
              <option value="AVID - Artist Control">AVID - Artist Control</option>
              <option value="Behringer - BCF2000">Behringer - BCF2000</option>
              <option value="Behringer - X-TOUCH">Behringer - X-TOUCH</option>
              <option value="Behringer - X-TOUCH COMPACT">Behringer - X-TOUCH COMPACT</option>
              <option value="Behringer - X-TOUCH MINI">Behringer - X-TOUCH MINI</option>
              <option value="Behringer - X-TOUCH ONE">Behringer - X-TOUCH ONE</option>
              <option value="Behringer - Wing">Behringer - Wing</option>
              <option value="Emagic - Logic Control">Emagic - Logic Control</option>
              <option value="Euphonix - MC Mix">Euphonix - MC Mix</option>
              <option value="Euphonix MC Control">Euphonix MC Control</option>
              <option value="Euphonix - System 5">Euphonix - System 5</option>
              <option value="Frontier Design - AlphaTrack">Frontier Design - AlphaTrack</option>
              <option value="iCON - Platform M+">iCON - Platform M+</option>
              <option value="iCON - Platform X+">iCON - Platform X+</option>
              <option value="iCON - QCon Pro">iCON - QCon Pro</option>
              <option value="iCON - QCon Pro G2">iCON - QCon Pro G2</option>
              <option value="iCON - QCon Pro X">iCON - QCon Pro X</option>
              <option value="iCON - QCon Pro XS">iCON - QCon Pro XS</option>
              <option value="iCON - P1-Nano">iCON - P1-Nano</option>
              <option value="iCON - V1-M">iCON - V1-M</option>
              <option value="iCON - V1-X">iCON - V1-X</option>
              <option value="Korg - nanoKONTROL2">Korg - nanoKONTROL2</option>
              <option value="M-Audio - ProjectMix I/O">M-Audio - ProjectMix I/O</option>
              <option value="Mackie d8b (emulation)">Mackie d8b (emulation)</option>
              <option value="Mackie - MCU Pro">Mackie - MCU Pro</option>
              <option value="Mackie - MCU XT Pro">Mackie - MCU XT Pro</option>
              <option value="Mackie - Mackie Control">Mackie - Mackie Control</option>
              <option value="Mackie - Mackie Control Universal">Mackie - Mackie Control Universal</option>
              <option value="Mackie - Mackie Control Universal Pro">Mackie - Mackie Control Universal Pro</option>
              <option value="PreSonus - FaderPort">PreSonus - FaderPort</option>
              <option value="PreSonus - FaderPort 8">PreSonus - FaderPort 8</option>
              <option value="PreSonus - FaderPort 16">PreSonus - FaderPort 16</option>
              <option value="Roland - VS700c">Roland - VS700c</option>
              <option value="Solid State Logic - Nucleus">Solid State Logic - Nucleus</option>
              <option value="Solid State Logic - Nucleus 2">Solid State Logic - Nucleus 2</option>
              <option value="Solid State Logic - UF1">Solid State Logic - UF1</option>
              <option value="Solid State Logic - UF8">Solid State Logic - UF8</option>
              <option value="Steinberg - CMC">Steinberg - CMC</option>
              <option value="Tascam - FW-1082">Tascam - FW-1082</option>
              <option value="Tascam - FW-1884">Tascam - FW-1884</option>
              <option value="Tascam - US-2400">Tascam - US-2400</option>
              <option value="Yamaha - 01X">Yamaha - 01X</option>
              <option value="OTHER">OTHER</option>
            </select>
          </div>

          <div class="full">
            <label for="extenderSelect">How many extenders do you have?</label>
            <select id="extenderSelect" class="select" style="max-width:180px;">
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
            <div id="extenderUpgradeNote" class="extender-note">
              <strong>Using extenders?</strong> Register (free) to unlock an upgrade that works with a control surface and up to 2 extenders.
            </div>
          </div>
        </div>

        <div class="actions">
          <button id="surveySubmit" class="cta disabled" onclick="submitConfiguration()" disabled>
            Download
          </button>

          <button class="cta secondary" type="button" onclick="skipConfiguration()">
            Skip configuration
          </button>
        </div>

        <div id="successMessage" class="ok">✓ Download enabled.</div>
        <div id="supportRow" class="support-row" aria-label="Support link">
          <a id="supportLinkBtn" class="cta secondary small" href="https://dawway.forumotion.com/" target="_blank" rel="noopener">Open your support link</a>
        </div>
        <div class="note">Used only to improve setup guidance and compatibility. No personal data is collected.</div>

        <div class="mini-links" aria-label="Quick links">
          <a href="DAWWAY-lite.html">Go to download page</a>
          <a href="index.html">Back to the main page</a>
        </div>
      </div>
    </div>
  </main>

  <!-- Hidden iframe for Google Form submission -->
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none"></iframe>

  <script>
        const DOWNLOAD_APPLICATION_URL = 'https://dawway.co.uk/online-lite/DAWWAY%20Lite.application';

    const dawSelect = document.getElementById('dawSelect');
    const surfaceSelect = document.getElementById('surfaceSelect');
    const extenderSelect = document.getElementById('extenderSelect');
    const submitBtn = document.getElementById('surveySubmit');
    const successMessage = document.getElementById('successMessage');
    const extenderUpgradeNote = document.getElementById('extenderUpgradeNote');

    const supportRow = document.getElementById('supportRow');
    const supportLinkBtn = document.getElementById('supportLinkBtn');

    function buildSupportLink() {
      const opt = dawSelect.options[dawSelect.selectedIndex];
      const forumSlug = opt && opt.dataset ? opt.dataset.forum : '';
      return forumSlug ? `https://dawway.forumotion.com/${forumSlug}` : 'https://dawway.forumotion.com/';
    }

    function showSupportLink() {
      if (!supportRow || !supportLinkBtn) return;
      const url = buildSupportLink();
      supportLinkBtn.href = url;
      // If we have a DAW selected, make it obvious this link is personalised
      const daw = dawSelect.value || 'your DAW';
      supportLinkBtn.textContent = `Open support for ${daw}`;
      supportRow.style.display = 'flex';
    }


    let skipMode = false;

    function setDownloadEnabled(enabled) {
      submitBtn.disabled = !enabled;
      submitBtn.classList.toggle('disabled', !enabled);
    }

    function checkFormValidity() {
      if (skipMode) return; // once skipped, keep download enabled
      const ok = !!(dawSelect.value && surfaceSelect.value);
      setDownloadEnabled(ok);
    }


    function updateExtenderNote() {
      if (!extenderUpgradeNote) return;
      const n = parseInt(extenderSelect.value || '0', 10);
      extenderUpgradeNote.style.display = (n > 0) ? 'block' : 'none';
    }

    dawSelect.addEventListener('change', checkFormValidity);
    dawSelect.addEventListener('change', () => { if (dawSelect.value) showSupportLink(); });
    surfaceSelect.addEventListener('change', checkFormValidity);
    extenderSelect.addEventListener('change', updateExtenderNote);

    // In case the browser restores form state from cache
    checkFormValidity();
    updateExtenderNote();

    function startDownload() {
      // Best effort: try a new tab (keeps this page visible). If blocked, fall back to same-tab navigation.
      const w = window.open(DOWNLOAD_APPLICATION_URL, '_blank', 'noopener');
      if (!w) {
        window.location.href = DOWNLOAD_APPLICATION_URL;
      }
    }

    function skipConfiguration() {
      skipMode = true;
      setDownloadEnabled(true);
      successMessage.style.display = 'block';
      successMessage.textContent = '✓ Download enabled. Click Download to begin.';
      if (dawSelect.value) showSupportLink();
    }

    function submitConfiguration() {
      // This button is now simply "Download".
      // If the user skipped configuration, do not submit the form.
      if (skipMode) {
        startDownload();
        return;
      }

      const daw = dawSelect.value;
      const surface = surfaceSelect.value;
      const extenders = extenderSelect.value;

      if (!daw || !surface) {
        alert('Please select your DAW and Control Surface, or click “Skip configuration”.');
        return;
      }

      // Submit to Google Form (unchanged)
      const formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSeaB9vAqq40RWI4bxXrnNIerLV6klmycpi0bX9MO1IA63OTYQ/formResponse';

      const form = document.createElement('form');
      form.method = 'POST';
      form.action = formUrl;
      form.target = 'hidden_iframe';

      // DAW question - entry.366340186
      const dawInput = document.createElement('input');
      dawInput.type = 'hidden';
      dawInput.name = 'entry.366340186';
      dawInput.value = daw;
      form.appendChild(dawInput);

      // Control Surface question - entry.1512777507
      const surfaceInput = document.createElement('input');
      surfaceInput.type = 'hidden';
      surfaceInput.name = 'entry.1512777507';
      surfaceInput.value = surface;
      form.appendChild(surfaceInput);

      // Extenders question - entry.563773489
      const extenderInput = document.createElement('input');
      extenderInput.type = 'hidden';
      extenderInput.name = 'entry.563773489';
      extenderInput.value = extenders;
      form.appendChild(extenderInput);

      document.body.appendChild(form);
      form.submit();
      document.body.removeChild(form);

      // UI feedback (don’t disable permanently — users may want to retry)
      successMessage.style.display = 'block';
      successMessage.textContent = '✓ Configuration submitted. Starting download…';
      showSupportLink();

      startDownload();
    }
  </script>
</body>
</html>
